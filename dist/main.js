(()=>{"use strict";class t{project={id:"",titre:"",priorite:"",description:"",date_db:"",date_fn:""};constructor(t,e,n,a,i,d){this.project.id=t,this.project.titre=e,this.project.priorite=a,this.project.description=n,this.project.date_db=i,this.project.date_fn=d,window.localStorage.setItem("Project"+t,JSON.stringify(this.project))}static get(t){return JSON.parse(window.localStorage.getItem("Project"+t))}static remove(t){window.localStorage.removeItem("Project"+t)}}class e{task={id:"",idProject:"",titre:"",description:"",status:"",date_db:"",date_fn:""};constructor(t,e,n,a,i,d,l){this.task.id=t,this.task.titre=n,this.task.idProject=e,this.task.status=i,this.task.description=a,this.task.date_db=d,this.task.date_fn=l,window.localStorage.setItem("Tasks"+t,JSON.stringify(this.task))}static get(t){return JSON.parse(window.localStorage.getItem("Tasks"+t))}static remove(t){window.localStorage.removeItem("Tasks"+t)}}let n,a=[],i=[],d=window.localStorage.getItem("ProjectIdShow");document.querySelector("#ClearAll").addEventListener("click",(()=>{window.localStorage.clear(),location.reload()})),document.addEventListener("click",(t=>{t.target.classList.contains("setProjectId")&&(n=t.target.value)}));for(let e=0;e<1e3;e++)t.get(e)&&a.push(t.get(e));for(let t=0;t<1e3;t++)e.get(t)&&i.push(e.get(t));let l=Number(a[a.length-1]?.id)+1||1;document.addEventListener("submit",(e=>{if(e.target.classList.contains("addProject")){let n=e.target;e.preventDefault(),new t(l,n.elements.titre.value,n.elements.description.value,n.elements.priorite.value,n.elements.date_db.value,n.elements.date_fn.value),window.localStorage.setItem("ProjectIdShow",l),location.reload()}}),!1),document.addEventListener("click",(n=>{n.target.classList.contains("delete")&&(t.remove(n.target.name),i.forEach((t=>{t.idProject==n.target.name&&e.remove(t.id)})),location.reload())}),!1),document.addEventListener("submit",(e=>{if(e.target.classList.contains("updateProject")){let n=e.target;e.preventDefault(),new t(d,n.elements.titre.value,n.elements.description.value,n.elements.priorite.value,n.elements.date_db.value,n.elements.date_fn.value),location.reload()}}),!1),document.addEventListener("click",(t=>{t.target.classList.contains("AllProjectsList")&&(window.localStorage.setItem("ProjectIdShow",t.target.value),location.reload())}),!1),a.forEach((t=>{let e;e="high"==t.priorite?"text-danger":"medium"==t.priorite?"text-warning":"text-info";const n=document.createElement("li");if(n.innerHTML=`<button value='${t.id}' class="btn ${e} w-full AllProjectsList" >${t.titre}</button>`,document.getElementById("AllProjectsList").appendChild(n),t.id==d){const e=document.createElement("div");e.innerHTML=`<div class='m-1 p-3 card bg-light'>\n            <h2 class='card-title' >${t.titre}\n                <button name='${t.id}' class='m-2 btn btn-danger delete float-right'>Delete</button>\n                <button name='${t.id}' data-toggle="modal"\n                data-target="#updateProjectModal" class='m-2 btn btn-success float-right'>Update</button>\n            </h2>\n            <h4>${t.description}</h4>\n            <div class="row">\n                <div class="m-2 col-lg card">\n                    <label class="card-title m-2" >TO DO :</label>\n                    <hr/>\n                    <div class="TO_DO${t.id} height"></div>\n                </div>\n                <div class="m-2 col-lg card">\n                    <label class="card-title m-2" >IN PROGRESS :</label>\n                    <hr/>\n                    <div class="IN_PROGRESS${t.id} height "></div>\n                </div>\n                <div class="m-2 col-lg card">\n                    <label class="card-title m-2" >DONE :</label>\n                    <hr/>\n                    <div class="DONE${t.id} height"></div>\n                </div>\n            </div>\n            <div>\n                <button\n                class="btn btn-info setProjectId"\n                data-toggle="modal"\n                data-target="#newTaskModal"\n                value='${t.id}'\n                >\n                Add Task\n                </button> \n                <small class='float-right'>Start date : ${t.date_db}  ///    End date :${t.date_fn}</small>\n            </div>\n        </div>\n\n        \n        <div class="modal fade" id="updateProjectModal">\n        <div class="modal-dialog modal-dialog-centered">\n          <div class="modal-content">\n            <div class="modal-header">\n              <h5 class="modal-title" id="model-Title">Update Project</h5>\n              <button\n                type="button"\n                class="close"\n                data-dismiss="modal"\n                aria-label="Close"\n                 >\n                <span aria-hidden="true" >&times;</span>\n              </button>\n            </div>\n            <div class="modal-body" id="modale-body">\n              <form method="post" class="updateProject" id="newProjectForm" >\n                <div class="form-group">\n                  <label for="taskTitle">Title: </label>\n                  <input\n                    type="text"\n                    class="form-control "\n                    name="titre"\n                    id="projectName"\n                    maxlength="20"\n                    value="${t.titre}"\n                    required\n                  />\n                </div>\n                <div class="form-group">\n                    <label for="taskTitle">Description: </label>\n                    <input\n                      type="text"\n                      class="form-control "\n                      name="description"\n                      id="projectName"\n                      value="${t.description}"\n                      required\n                    />\n                  </div>\n                  <div class="form-group">\n                    <label for="oldtaskPriority">Priority: </label>\n                    <select\n                      class="custom-select"\n                      id="oldtaskPriority"\n                      name="priorite"\n                      value="${t.priorite}"\n                      required\n                    >\n                     <option value="${t.priorite}" selected hidden>${t.priorite}</option>\n                      <option value="low">Low</option>\n                      <option value="medium">Medium</option>\n                      <option value="high">High</option>\n                    </select>\n                    <div class="invalid-feedback">Priority required</div>\n                  </div>\n                  <div class="form-group">\n                    <label for="taskTitle">Start date: </label>\n                    <input\n                      type="date"\n                      class="form-control "\n                      name="date_db"\n                      id="projectName"\n                      maxlength="20"\n                      value="${t.date_db}"\n                      required\n                    />\n                  </div>\n                  <div class="form-group">\n                    <label for="taskTitle">End date: </label>\n                    <input\n                      type="date"\n                      class="form-control "\n                      name="date_fn"\n                      id="projectName"\n                      maxlength="20"\n                      value="${t.date_fn}"\n                      required\n                    />\n                  </div>\n                <div class="form-group mb-0 d-flex justify-content-end">\n                  <button\n                    type="button"\n                    class="btn btn-outline-secondary mr-1"\n                    data-dismiss="modal"\n                  >\n                    Close\n                  </button>\n                  <button type="submit" class="btn btn-success" id="modale_addProject_btn" aria-hidden="true" >\n                    Update Project\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>`,document.getElementById("editorContent").appendChild(e),i.forEach((e=>{if(t.id==e.idProject){let n="."+e.status+t.id;const a=document.createElement("div");a.innerHTML=`\n        <div class="card m-2">\n        <div class="card-header">\n        ${e.titre}\n            </div>\n            <div class="card-body">\n                <p class="card-text">${e.description}</p>\n                <small>Start date : ${e.date_db}  </small></br><small>End date :${e.date_fn}</small>\n              </br>\n                <select class="mt-2 btn btn-secondary updateTask" name='${e.id}'  required>\n                <option disabled selected hidden>Change Status</option>\n                <option value="TO_DO" >TO DO</option>\n                <option value="IN_PROGRESS">IN PROGRESS</option>\n                <option value="DONE">DONE</option>\n              </select>\n                <button name='${e.id}' class='btn btn-danger mt-2 deleteTask float-right'>Delete Task</button>\n                \n            </div>\n        </div>\n        `,window.addEventListener("load",(t=>{t.target.querySelector(n)&&document.querySelector(n).appendChild(a)}))}}))}}));let o=Number(i[i.length-1]?.id+1)||1;document.addEventListener("submit",(t=>{if(t.target.classList.contains("addTask")){t.preventDefault();let a=t.target;new e(o,n,a.elements.titre.value,a.elements.description.value,a.elements.status.value,a.elements.date_db.value,a.elements.date_fn.value),location.reload()}})),document.addEventListener("click",(t=>{t.target.classList.contains("deleteTask")&&(e.remove(t.target.name),location.reload())}),!1),document.addEventListener("change",(t=>{t.preventDefault(),t.target.classList.contains("updateTask")&&i.forEach((n=>{n.id==t.target.name&&(new e(n.id,n.idProject,n.titre,n.description,t.target.value,n.date_db,n.date_fn),location.reload())}))}),!1)})();